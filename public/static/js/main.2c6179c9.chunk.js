(this.webpackJsonpapispotify=this.webpackJsonpapispotify||[]).push([[0],{87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(19),a=n.n(c),o=n(7),s=n(22),i=n(44),l=n(5),u="[fetch] getParams",j="[login] getUser",d="[logout] logout",b="[items] getitems",p="[ui] errorForm",m="[ui] cleanErrorForm",h={nombre:"BD Name",login:JSON.parse(localStorage.getItem("login")),token:"token",uid:"uid"},f={items:[]},O={artist:"ej",type:"ej/track,album",market:"ej/US,ES"},g={msg:!1},x="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c,y=Object(s.b)({params:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(l.a)(Object(l.a)({},e),{},{artist:t.payload.artist,type:t.payload.type,market:t.payload.market});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(l.a)(Object(l.a)({},e),{},{login:!0,nombre:t.payload.user.nombre,token:t.payload.token,uid:t.payload.user.uid});case d:return{login:!1,token:null};default:return e}},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(l.a)(Object(l.a)({},e),{},{items:t.payload});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(l.a)(Object(l.a)({},e),{},{msg:t.payload.msg});case m:return Object(l.a)(Object(l.a)({},e),{},{msg:!1});default:return e}}}),v=Object(s.d)(y,x(Object(s.a)(i.a))),w=n(4),k=n.n(w),S=n(9),N=n(18),C=n(6),E=n(45),T=n(1),I=["isLoged","component"],P=function(e){var t=e.isLoged,n=e.component,r=Object(E.a)(e,I);return Object(T.jsx)(C.b,Object(l.a)(Object(l.a)({},r),{},{component:function(e){return t?Object(T.jsx)(n,Object(l.a)({},e)):Object(T.jsx)(C.a,{to:"/login"})}}))},L=function(e){var t=e.isLoged,n=e.component;return Object(T.jsx)(C.b,{component:function(e){return t?Object(T.jsx)(C.a,{to:"/"}):Object(T.jsx)(n,Object(l.a)({},e))}})},J=n(13),D=n(24),F=n.n(D),U=function(e){var t="".concat("https://spotify-searching.herokuapp.com/api","/auth/createuser");try{return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(n){console.log(n)}},_=function(e){var t="".concat("https://spotify-searching.herokuapp.com/api","/auth/loginuser");try{return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(n){console.log(n)}},A=function(e){var t="".concat("https://spotify-searching.herokuapp.com/api","/auth/getuserbyid");try{return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(n){console.log(n)}},R=function(e,t,n,r){console.log(e);var c="https://api.spotify.com/v1/search?q=".concat(t,"&type=").concat(n,"&market=").concat(r);return F.a.get(c,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})},B=function(e){return{type:p,payload:e}},H=function(){var e=Object(S.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("".concat("https://spotify-searching.herokuapp.com/api","/auth/authorizeuser"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 2:t=e.sent,window.location.href=t.data;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){return function(){var t=Object(S.a)(k.a.mark((function t(n){var r,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(e);case 2:return r=t.sent,t.next=5,r.json();case 5:(c=t.sent).msg?n(B(c)):n(W(c));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W=function(e){return{type:j,payload:e}},z=n(20),X=n.n(z),q=n(23),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(J.a)(t,2),c=n[0],a=n[1],o=function(){a(e)},s=function(e){var t=e.target;a(Object(l.a)(Object(l.a)({},c),{},Object(q.a)({},t.name,t.value)))};return[c,s,o]},V=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})).auth,n=M({nombre:"",correo:"",password:"",confirmPassword:""}),r=Object(J.a)(n,2),c=r[0],a=c.nombre,s=c.correo,i=c.password,l=c.confirmPassword,u=r[1],j=function(){var n=Object(S.a)(k.a.mark((function n(r){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r.preventDefault(),i!==l?X.a.fire("Error","Las contrasenas deben ser igaules","error"):a.length<=2?X.a.fire("Error","El nombre deben ser un nombe valido","error"):s.length<=7?X.a.fire("Error","El correo debe ser un correo valido","error"):(e(G({nombre:a,correo:s,password:i})),localStorage.setItem("login",JSON.stringify(t.login)))}catch(c){console.log(c)}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(T.jsx)("div",{className:"row item",children:Object(T.jsxs)("form",{type:"submit",className:"col-sm-12",children:[Object(T.jsx)("h2",{children:"Create a Account"}),Object(T.jsx)("label",{className:"form-label user",children:"Name"}),Object(T.jsx)("input",{type:"click",name:"nombre",value:a,onChange:u,className:"form-control name",placeholder:"nombre"}),Object(T.jsx)("label",{className:"form-label user",children:"Correo"}),Object(T.jsx)("input",{type:"click",name:"correo",value:s,onChange:u,className:"form-control",placeholder:"name@example.com"}),Object(T.jsx)("label",{className:"form-label user",children:"Password"}),Object(T.jsx)("input",{type:"password",name:"password",value:i,onChange:u,className:"form-control ",placeholder:"password"}),Object(T.jsx)("input",{type:"password",name:"confirmPassword",value:l,onChange:u,className:"form-control ",placeholder:"Confirm Password"}),Object(T.jsx)("button",{type:"submit",onClick:j,className:"buttom",children:"LoginUser"})]})})},K=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})).auth,n=M({correo:"",password:""}),r=Object(J.a)(n,2),c=r[0],a=c.correo,s=c.password,i=r[1];return Object(T.jsx)("div",{className:"row item",children:Object(T.jsxs)("form",{type:"submit",className:"col-sm-10",children:[Object(T.jsx)("h2",{children:"Login"}),Object(T.jsx)("label",{className:"form-label user",children:"Correo"}),Object(T.jsx)("input",{className:"form-control name",type:"click",name:"correo",value:a,onChange:i,placeholder:"correo"}),Object(T.jsx)("label",{className:"form-label user",children:"Password"}),Object(T.jsx)("input",{className:"form-control",type:"password",name:"password",value:s,onChange:i,placeholder:"Password"}),Object(T.jsx)("button",{type:"submit",onClick:function(n){var r;n.preventDefault(),a.length<=7?X.a.fire("Error","El correo debe ser un correo valido","error"):(e((r={correo:a,password:s},function(){var e=Object(S.a)(k.a.mark((function e(t){var n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(r);case 2:return n=e.sent,e.next=5,n.json();case 5:(c=e.sent).msg?t(B(c)):(t(W(c)),t({type:m}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),localStorage.setItem("login",JSON.stringify(t.login)))},className:"buttom",children:"LoginUser"})]})})},Q=function(){var e,t=Object(o.c)((function(e){return e})).ui,n=Object(r.useState)(JSON.parse(localStorage.getItem("formvalue"))),c=Object(J.a)(n,2),a=c[0],s=c[1];return JSON.stringify(localStorage.setItem("formvalue",a)),e=JSON.parse(localStorage.getItem("formvalue")),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"loginScreen",children:[e&&Object(T.jsx)(K,{}),!e&&Object(T.jsx)(V,{}),t.msg&&Object(T.jsx)("h5",{children:"Usuario o Contrasena incorrectos"}),Object(T.jsx)("div",{className:"buttom-change",children:Object(T.jsx)("button",{type:"click",className:"btn",onClick:function(){s(!a)},children:e?"Do you need a account?":"Sign In"})}),Object(T.jsxs)("div",{className:"item",children:[Object(T.jsx)("h4",{children:"Login with Spotify"}),Object(T.jsx)("button",{className:"buttom",type:"click",onClick:function(){H()},style:{border:"none",borderRadius:"90px"},children:Object(T.jsx)("img",{src:"/img/spotify-logo2.png",alt:"",style:{width:"100px"}})})]})]})})},Y=function(e){var t=e.match,n=e.history,r=Object(o.c)((function(e){return e.items})).items,c=t.params.id;if(0===r.length)return Object(T.jsx)(C.a,{to:"/body"});var a=r.filter((function(e){return e.id===c}))[0],s=a.name,i=a.images,l=(a.artists,a.external_urls),u=a.release_date,j=a.total_tracks,d=a.type,b=l.spotify;return Object(T.jsxs)("div",{className:"card item",style:{width:"20rem"},children:[Object(T.jsx)("h1",{children:" Card Review "}),Object(T.jsx)("img",{src:i[1].url,alt:"imagen de card",className:"card-img-top"}),Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsxs)("h3",{children:["type: ",d]}),Object(T.jsxs)("h3",{className:"card-title",children:["name: ",s]}),Object(T.jsxs)("h3",{className:"card-text",children:["total trakcks: ",j]}),Object(T.jsxs)("h3",{className:"card-text",children:["release date: ",u]}),Object(T.jsx)("a",{href:b,children:"Listen on Spotify"})]}),Object(T.jsx)("div",{children:Object(T.jsx)("h3",{})}),Object(T.jsx)("button",{type:"click",onClick:function(){n.push("/body")},children:"Return"})]})},Z=function(e,t,n){return{type:u,payload:{artist:e,type:t,market:n}}},$=function(e,t,n,r){return function(){var c=Object(S.a)(k.a.mark((function c(a){var o,s,i,l,u;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,R(e,t,n,r);case 2:return o=c.sent,c.next=5,o;case 5:s=c.sent,(i=s.data).albums?(l=i.albums.items,a(ee(l))):i.tracks&&(u=i.tracks.items,a(ee(u)));case 8:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()},ee=function(e){return{type:b,payload:e}},te=function(e){var t=e.history,n=Object(o.b)(),r=M({artist:"artist",type:"album",market:"US"}),c=Object(J.a)(r,2),a=c[0],s=a.artist,i=a.type,l=a.market,u=c[1],j=Object(o.c)((function(e){return e})),b=j.auth,p=(j.params,b.token),m=function(){var e=Object(S.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n(Z(s,i,l));case 3:n($(p,s,i,l));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)("h5",{children:b.nombre&&"Welcome ".concat(b.nombre)}),Object(T.jsxs)("form",{class:"mb-3",onSubmit:m,children:[Object(T.jsx)("label",{for:"exampleFormControlInput1",class:"form-label",children:"Escriba su artista"}),Object(T.jsx)("input",{type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"Artist name",onChange:u,name:"artist"}),Object(T.jsx)("label",{children:"Select a Type"}),Object(T.jsxs)("select",{class:"form-select","aria-label":"Default select example",onChange:u,value:i,name:"type",children:[Object(T.jsx)("option",{value:"album",selected:!0,children:"album"}),Object(T.jsx)("option",{value:"Artist",children:"artist"}),Object(T.jsx)("option",{value:"track",children:"track"})]}),Object(T.jsx)("label",{children:"Select a market"}),Object(T.jsxs)("select",{class:"form-select","aria-label":"Default select example",onChange:u,value:l,name:"market",children:[Object(T.jsx)("option",{value:"US",selected:!0,children:"US"}),Object(T.jsx)("option",{value:"ES",children:"ES"})]}),Object(T.jsx)("button",{type:"submit",children:"Go"})]}),Object(T.jsx)("button",{type:"click",onClick:function(){t.replace("/login"),n({type:d}),localStorage.setItem("login",JSON.stringify(!1)),localStorage.setItem("uid",JSON.stringify(!1)),localStorage.setItem("data",!1)},children:"Logout"})]})},ne=function(){return Object(T.jsx)("div",{children:Object(T.jsx)("h1",{children:"Search Spotify"})})},re=n(46),ce=n(90),ae=n(91),oe=n(92),se=n(93),ie=function(e){var t=Object(r.useState)(0),n=Object(J.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),i=Object(J.a)(s,2),l=i[0],u=i[1],j=Object(o.c)((function(e){return e.items})).items.map((function(e){return{image:window.innerWidth>=640&&e.images[0]||window.innerWidth<=640&&e.images[1],url:e.href,id:e.id,name:e.name}})).map((function(e){return{src:e.image,id:e.id,url:e.url,altText:e.name,caption:e.name}})),d=function(){if(!l){var e=c===j.length-1?0:c+1;a(e)}},b=function(){if(!l){var e=0===c?j.length-1:c-1;a(e)}},p=j.map((function(e){return Object(T.jsxs)(re.a,{onExiting:function(){return u(!0)},onExited:function(){return u(!1)},children:[Object(T.jsx)("img",{src:e.src.url,alt:j.altText,width:"100%",height:e.src.height}),Object(T.jsx)(N.b,{to:"./body/card/".concat(e.id),className:"link",children:"See more"}),Object(T.jsx)(ce.a,{captionText:e.caption,captionHeader:e.caption})]},e.src.url)}));return Object(T.jsxs)(ae.a,{activeIndex:c,next:d,previous:b,className:"carusel-container",children:[Object(T.jsx)(oe.a,{items:j,activeIndex:c,onClickHandler:function(e){l||a(e)}}),p,Object(T.jsx)(se.a,{direction:"prev",directionText:"Previous",onClickHandler:b}),Object(T.jsx)(se.a,{direction:"next",directionText:"Next",onClickHandler:d})]})},le=function(e){var t=e.history,n=Object(o.b)(),c=Object(o.c)((function(e){return e})).auth;"uid"!==c.uid&&localStorage.setItem("uid",c.uid);var a=localStorage.getItem("uid");return Object(r.useEffect)((function(){var e;"uid"===c.uid&&n((e={uid:a},function(){var t=Object(S.a)(k.a.mark((function t(n){var r,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e);case 2:return r=t.sent,t.next=5,r.json();case 5:c=t.sent,n(W(c));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),localStorage.setItem("login",JSON.stringify(c.login))}),[a]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ne,{}),Object(T.jsx)(te,{history:t}),Object(T.jsx)(ie,{})]})},ue=function(){return Object(T.jsx)("div",{children:Object(T.jsxs)(C.d,{children:[Object(T.jsx)(C.b,{exact:!0,path:"/body",component:le}),Object(T.jsx)(C.b,{exact:!0,path:"/body/card/:id",component:Y}),Object(T.jsx)(C.a,{to:"/body"})]})})},je=function(e){if(e){e={codigo:e};var t="".concat("https://spotify-searching.herokuapp.com/api","/auth/usertokenauth");return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log(e),e})).catch(console.log())}console.log("no hay codigo")},de=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})).auth.login,n=new URLSearchParams(window.location.search);return Object(r.useEffect)(Object(S.a)(k.a.mark((function t(){var r,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.get("code"),t.next=3,je(r);case 3:(c=t.sent)&&e({type:j,payload:c});case 5:case"end":return t.stop()}}),t)}))),[window.location.href]),Object(T.jsx)(N.a,{children:Object(T.jsxs)(C.d,{children:[Object(T.jsx)(L,{exact:!0,path:"/login",component:Q,isLoged:t}),Object(T.jsx)(P,{path:"/",component:ue,isLoged:t}),Object(T.jsx)(C.a,{to:"/login"})]})})},be=function(){return Object(T.jsx)(o.a,{store:v,children:Object(T.jsx)(de,{})})},pe=(n(87),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))});a.a.render(Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(be,{})}),document.getElementById("root")),pe()}},[[88,1,2]]]);
//# sourceMappingURL=main.2c6179c9.chunk.js.map